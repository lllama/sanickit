<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Templates" href="templates.html" /><link rel="prev" title="Routing" href="routes.html" />

    <!-- Generated with Sphinx 7.0.1 and Furo 2023.05.20 -->
        <title>Handlers - SanicKit documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=e6660623a769aa55fea372102b9bf3151b292993" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">SanicKit  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">SanicKit  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="routes.html">Routing</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Handlers</a></li>
<li class="toctree-l1"><a class="reference internal" href="templates.html">Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="logos.html">Logo Options</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="handlers">
<h1>Handlers<a class="headerlink" href="#handlers" title="Permalink to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">+page.sanic</span></code> files can contain a <code class="docutils literal notranslate"><span class="pre">&lt;handler&gt;</span></code> tag that contains the python code for <code class="docutils literal notranslate"><span class="pre">GET</span></code> requests.</p>
<p>The code gets compiled into a standard Sanic handler that is passed the current <code class="docutils literal notranslate"><span class="pre">request</span></code> along with any path parameters. It also gets passed a <code class="docutils literal notranslate"><span class="pre">TEMPLATE</span></code> parameter that contains the template name for the route.</p>
<section id="path-parameters">
<h2>Path parameters<a class="headerlink" href="#path-parameters" title="Permalink to this heading">#</a></h2>
<p>By default, all path parameters are passed as strings. Sanic supports converting the parameters into specific types (see the <a class="reference external" href="https://sanic.dev/en/guide/basics/routing.html#http-methods">Sanic docs</a> for the supported types). To perform this conversion in SanicKit, specify the types as attributes in the <code class="docutils literal notranslate"><span class="pre">&lt;handler&gt;</span></code> tag. E.g. <code class="docutils literal notranslate"><span class="pre">&lt;handler</span> <span class="pre">id=“int”</span> <span class="pre">article=“uuid”&gt;</span></code> will convert the <code class="docutils literal notranslate"><span class="pre">id</span></code> parameter to an int and ensure the <code class="docutils literal notranslate"><span class="pre">article</span></code> parameter is a valid UUID.</p>
</section>
<section id="imports">
<h2>Imports<a class="headerlink" href="#imports" title="Permalink to this heading">#</a></h2>
<p>If you need to import any code then just use standard import statements. These will be extracted from the function and placed at the module level along with any imports from other handlers.</p>
<section id="lib-and-relative-imports">
<h3><code class="docutils literal notranslate"><span class="pre">Lib</span></code> and relative imports<a class="headerlink" href="#lib-and-relative-imports" title="Permalink to this heading">#</a></h3>
<p>Any code put in the <code class="docutils literal notranslate"><span class="pre">lib</span></code> folder can be imported using the relative <code class="docutils literal notranslate"><span class="pre">.lib</span></code> import. E.g. <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">.lib.my_module</span> <span class="pre">import</span> <span class="pre">my_function</span></code></p>
<p>Any Python files placed in the same directory as the <code class="docutils literal notranslate"><span class="pre">+page.sanic</span></code> file can also be imported using standard relative import syntax. E.g. <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">.my_file</span> <span class="pre">import</span> <span class="pre">my_function</span></code></p>
</section>
</section>
<section id="returning">
<h2>Returning<a class="headerlink" href="#returning" title="Permalink to this heading">#</a></h2>
<p>There is no need to specify a return statement for the handler function. The default behaviour is for the handler to pass the current local variables to the template as its context. (I.e. the context is set to <code class="docutils literal notranslate"><span class="pre">locals()</span></code>.)</p>
<p>If you need or want to return early, then you can use the <code class="docutils literal notranslate"><span class="pre">template()</span></code> helper function. Adding a <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">template()</span></code> statement, will return the template and pass the value of <code class="docutils literal notranslate"><span class="pre">locals()</span></code> as its context. You can also return any other valid Sanic response wherever you want.</p>
<p>If you want to return a template fragment then you can use the <code class="docutils literal notranslate"><span class="pre">fragment</span></code> helper function. Using <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">fragment(&lt;fragment</span> <span class="pre">name&gt;)</span></code> will pass the value of <code class="docutils literal notranslate"><span class="pre">locals()</span></code> to the template and return the block with the same name as the requested fragment.</p>
</section>
<section id="helper-function-reference">
<h2>Helper function reference<a class="headerlink" href="#helper-function-reference" title="Permalink to this heading">#</a></h2>
<section id="template">
<h3><code class="docutils literal notranslate"><span class="pre">template</span></code><a class="headerlink" href="#template" title="Permalink to this heading">#</a></h3>
<p>Returns the current template and passes the current value of <code class="docutils literal notranslate"><span class="pre">locals()</span></code> as its context.</p>
</section>
<section id="fragment">
<span id="fragment-helper"></span><h3><code class="docutils literal notranslate"><span class="pre">fragment</span></code><a class="headerlink" href="#fragment" title="Permalink to this heading">#</a></h3>
<p>The first parameter is a block name that will be returned instead of the full template. The current value of <code class="docutils literal notranslate"><span class="pre">locals()</span></code> is passed as its context.</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="templates.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Templates</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="routes.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Routing</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Felix Ingram
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Handlers</a><ul>
<li><a class="reference internal" href="#path-parameters">Path parameters</a></li>
<li><a class="reference internal" href="#imports">Imports</a><ul>
<li><a class="reference internal" href="#lib-and-relative-imports"><code class="docutils literal notranslate"><span class="pre">Lib</span></code> and relative imports</a></li>
</ul>
</li>
<li><a class="reference internal" href="#returning">Returning</a></li>
<li><a class="reference internal" href="#helper-function-reference">Helper function reference</a><ul>
<li><a class="reference internal" href="#template"><code class="docutils literal notranslate"><span class="pre">template</span></code></a></li>
<li><a class="reference internal" href="#fragment"><code class="docutils literal notranslate"><span class="pre">fragment</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    </body>
</html>